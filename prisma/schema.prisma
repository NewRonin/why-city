generator client {
  provider      = "prisma-client"
  output        = "generated"
  moduleFormat  = "esm"
  binaryTargets = ["native", "windows", "debian-openssl-3.0.x"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Point {
  id               Int      @id @default(autoincrement())
  title            String
  address          String   @db.Text
  latitude         Float    // Широта
  longitude        Float    // Долгота
  taskType         TaskType
  taskText         String   @db.Text
  filePath         String?  
  fileSize         Int?     
  mimeType         String?  
  correctAnswer    String
  successMessage   String   @db.Text
  route            Route?   @relation(fields: [routeId], references: [id])
  routeId          Int?
}

model Route {
  id               Int      @id @default(autoincrement())
  routeNumber      String
  points           Point[]
  teams            Team[]
}

model Team {
  id               Int      @id @default(autoincrement())
  name             String
  password         String   @unique
  route            Route    @relation(fields: [routeId], references: [id])
  routeId          Int
  currentPoint     Int
  score            Int      @default(0)      
}

model Admin {
  id        Int     @id @default(autoincrement())
  username  String  @unique
  password  String  
}

enum TaskType {
  text
  image
  audio
}
